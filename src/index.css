@import "tailwindcss";

/* Common component classes to avoid long Tailwind chains in Pug templates */
.status-panel {
	@apply w-full p-4 shadow-md mt-6;
}

.status-panel-pending {
	@apply bg-blue-50 border-l-4 border-blue-400;
}

.status-panel-warning {
	@apply bg-yellow-50 border-l-4 border-yellow-400;
}

.status-panel-admin {
	@apply bg-gray-600;
}

.link {
	@apply hover:underline text-base text-gray-500 hover:text-black transition duration-300 ease-in-out;
}

.link.light {
	@apply text-white hover:text-gray-200;
}

button {
	@apply rounded-2xl text-sm font-medium h-9 px-4 py-2 shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none flex items-center justify-center gap-2;
}

button.primary {
	@apply bg-blue-500 text-white hover:bg-blue-700 focus:ring-blue-500;
}

button.destructive {
	@apply bg-red-500 text-white hover:bg-red-700 focus:ring-red-500;
}

button.outline {
	@apply border-gray-500 hover:bg-gray-200 focus:ring-gray-500;
}

/* HTMX loading indicator */
.htmx-indicator {
	display: none;
}

.htmx-request .htmx-indicator {
	display: inline;
}

.htmx-request.htmx-indicator {
	display: inline;
}

/* Loading spinner animation */
@keyframes spin {
	to {
		transform: rotate(360deg);
	}
}

/* Disabled button state for HTMX */
button:disabled, button.htmx-request {
	@apply opacity-70 cursor-not-allowed;
}

/* Admin Popover */
.admin-popover {
	@apply relative inline-block;
}

.admin-popover-menu {
	@apply absolute left-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-300;
	@apply opacity-0 invisible transition-all duration-200;
	@apply z-50;
	transform: translateY(-10px);
}

.admin-popover.open .admin-popover-menu {
	@apply opacity-100 visible;
	transform: translateY(0);
}

.admin-menu-item {
	@apply block px-4 py-3 text-gray-900 hover:bg-gray-50;
	@apply transition-colors duration-150;
	@apply first:rounded-t-lg last:rounded-b-lg;
	@apply border-b border-gray-200 last:border-b-0;
}

select {
	appearance: none; /* Removes default styles */
	-webkit-appearance: none; /* Safari */
	-moz-appearance: none; /* Firefox */
	@apply border-2 bg-white flex h-9 w-full min-w-0 px-3 py-1 text-base shadow-xs border-gray-300 rounded-lg;
}

.card {
	@apply bg-white p-2 rounded-lg shadow-lg;
}

.input-label {
	@apply text-sm leading-none font-medium select-none;
}

.text-input {
	@apply border-2 bg-white flex h-9 w-full min-w-0 px-3 py-1 text-base shadow-xs border-gray-300 rounded-lg;
}

/* Allow textareas to have custom heights (override h-9 from .text-input) */
textarea.text-input {
	height: auto;
	min-height: 2.25rem;
}

/* Fix date input styling on mobile and desktop */
input[type="date"].text-input {
	display: block;
	-webkit-appearance: none;
	-moz-appearance: none;
	appearance: none;
	line-height: normal;
	height: 2.25rem; /* h-9 */
	min-height: 2.25rem;
	max-width: 100%;
	box-sizing: border-box;
}

/* Ensure date input icon doesn't overflow */
input[type="date"].text-input::-webkit-calendar-picker-indicator {
	cursor: pointer;
	position: relative;
	right: 0;
}

input[type="date"].text-input::-webkit-date-and-time-value {
	text-align: left;
}

.text-input:disabled {
	@apply bg-gray-300;
}

.text-input.error {
	@apply border-red-500;
}

.select-wrapper {
	position: relative;
	display: inline-block;
	width: 100%;
}

.select-wrapper select {
	width: 100%;
	padding-right: 2rem; /* Make space for custom arrow */
}

.select-wrapper select.error {
	@apply border-red-500;
}

.select-wrapper::after {
	content: "â–¾"; /* Unicode down arrow */
	position: absolute;
	right: 10px;
	top: 50%;
	transform: translateY(-50%);
	pointer-events: none;
	color: #888;
}

.ts-control {
	@apply font-medium border-2 h-9 px-3 py-1 shadow-xs border-gray-300 rounded-lg z-[1] flex gap-1;
}

.ts-control.error {
	@apply border-red-400;
}

.ts-control .item {
	@apply m-0 p-1 rounded-lg bg-gray-200 flex items-center;
}

.ts-control .item.active {
	@apply bg-gray-300;
}

/* Single-value typeaheads: display as plain text without pill styling */
.ts-control.single-value .item {
	@apply m-0 p-0 rounded-none bg-transparent;
}

.ts-control.single-value .item.active {
	@apply bg-transparent;
}

.ts-dropdown {
	@apply border-2 border-gray-300 bg-white shadow-xs rounded-lg z-[10];
	position: absolute;
	top: 100%;
	left: 0;
	width: 100%;
}

.ts-dropdown,
.ts-control,
.ts-control input {
	@apply text-base;
}

.data-table {
	display: grid;
	border-collapse: collapse;
	min-width: 100%;
}

.cell {
	padding: 15px;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

#adminMembers {
	grid-template-columns:
	minmax(50px, 1.66fr)
	minmax(80px, 0.33fr)
	minmax(100px, 1.67fr)
	minmax(150px, 1.67fr)
	minmax(150px, 0.66fr)
	minmax(150px, 0.66fr)
	minmax(150px, 0.66fr);
}

#annualStandings {
	grid-template-columns:
	minmax(30px, 0.33fr)
	minmax(120px, 1.66fr)
	minmax(30px, 0.33fr);
}

.lifetimeStandingsLevel {
	grid-template-columns:
	minmax(120px, 1.66fr)
	minmax(30px, 0.33fr);
}

/* Typeahead Loading States */
.tom-select-typeahead.loading .ts-control {
	@apply bg-gray-50 relative;
}

.tom-select-typeahead.loading .ts-control::after {
	content: "";
	position: absolute;
	right: 8px;
	top: 50%;
	transform: translateY(-50%);
	width: 16px;
	height: 16px;
	border: 2px solid #e5e7eb;
	border-top-color: #3b82f6;
	border-radius: 50%;
	animation: spin 1s linear infinite;
}

@keyframes spin {
	to {
		transform: translateY(-50%) rotate(360deg);
	}
}

.tom-select-typeahead.custom-loading .ts-control {
	@apply bg-blue-50 border-blue-300;
}

.tom-select-typeahead.custom-loading .ts-control::after {
	border-color: #dbeafe;
	border-top-color: #2563eb;
}

/* Loading indicator in dropdown */
.loading-indicator {
	@apply p-3 text-center text-gray-500 text-sm italic;
}

/* Custom typeahead styling example */
.tom-select-typeahead.custom-typeahead .ts-control {
	@apply border-purple-300 focus-within:border-purple-500;
}

.tom-select-typeahead.custom-typeahead .ts-dropdown {
	@apply border-purple-300 shadow-lg;
}

/* Tablesort styling */
table[data-sortable] th:not(.no-sort),
th[role="columnheader"]:not(.no-sort) {
	cursor: pointer;
	user-select: none;
}

table[data-sortable] th:not(.no-sort):hover,
th[role="columnheader"]:not(.no-sort):hover {
	background-color: rgba(0, 0, 0, 0.05);
}

/* Ensure non-sortable columns don't show sort indicators or cursor */
table[data-sortable] th[data-sort-method="none"] {
	cursor: default !important;
}

table[data-sortable] th[data-sort-method="none"]:after {
	display: none !important;
}

table[data-sortable] th[aria-sort="ascending"]:after,
th[role="columnheader"][aria-sort="ascending"]:after {
	content: "";
	display: inline-block;
	width: 0;
	height: 0;
	margin-left: 8px;
	vertical-align: middle;
	border-left: 4px solid transparent;
	border-right: 4px solid transparent;
	border-bottom: 6px solid #3b82f6;
}

table[data-sortable] th[aria-sort="descending"]:after,
th[role="columnheader"][aria-sort="descending"]:after {
	content: "";
	display: inline-block;
	width: 0;
	height: 0;
	margin-left: 8px;
	vertical-align: middle;
	border-left: 4px solid transparent;
	border-right: 4px solid transparent;
	border-top: 6px solid #3b82f6;
}

table[data-sortable] th:not([aria-sort]):not(.no-sort):after,
th[role="columnheader"]:not([aria-sort]):after {
	content: "";
	display: inline-block;
	width: 0;
	height: 0;
	margin-left: 8px;
	vertical-align: middle;
	border-left: 4px solid transparent;
	border-right: 4px solid transparent;
	border-top: 3px solid #9ca3af;
	border-bottom: 3px solid #9ca3af;
	opacity: 0.7;
}

/**
 * HoverCard Component Styles
 *
 * Uses native Popover API for show/hide state
 * Provides positioning, animations, and arrow styling
 */

/* Root container */
.hovercard-root {
	@apply relative inline-flex items-center;
}

/* Trigger wrapper */
.hovercard-trigger {
	@apply inline-flex items-center cursor-pointer;
}

.hovercard-trigger:focus-visible {
	outline: 2px solid rgb(59 130 246);
	outline-offset: 2px;
	border-radius: 0.25rem;
}

/* Content card - Uses Popover API for visibility */
.hovercard-content {
	@apply fixed z-50 bg-white rounded-lg;
	@apply p-4;
	@apply transition-all duration-200 ease-out;

	/* Enhanced shadow and border for depth */
	border: 1px solid rgb(226 232 240);
	box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1),
	            0 8px 10px -6px rgba(0, 0, 0, 0.1);

	/* Remove default popover styles */
	margin: 0;
	inset: unset;

	/* Prevent scrollbar */
	overflow: visible;
	max-height: none;
	max-width: none;

	/* Initial state - hidden via Popover API */
	&:not(:popover-open) {
		@apply invisible opacity-0;
		transform: scale(0.95);
	}

	/* Open state - shown via Popover API */
	&:popover-open {
		@apply visible opacity-100;
		transform: scale(1);
	}
}

/* Border variants for visual emphasis */
.hovercard-content.hovercard-bordered {
	border-width: 2px;
	border-color: rgb(203 213 225);
}

.hovercard-content.hovercard-blue-border {
	border: 2px solid rgb(59 130 246);
}

.hovercard-content.hovercard-green-border {
	border: 2px solid rgb(34 197 94);
}

.hovercard-content.hovercard-purple-border {
	border: 2px solid rgb(168 85 247);
}

.hovercard-content.hovercard-amber-border {
	border: 2px solid rgb(251 191 36);
}

/* Colored arrows - override border colors based on positioned side */
.hovercard-content.hovercard-blue-border[data-positioned-side="top"] .hovercard-arrow {
	border-right-color: rgb(59 130 246);
	border-bottom-color: rgb(59 130 246);
}

.hovercard-content.hovercard-blue-border[data-positioned-side="bottom"] .hovercard-arrow {
	border-left-color: rgb(59 130 246);
	border-top-color: rgb(59 130 246);
}

.hovercard-content.hovercard-blue-border[data-positioned-side="left"] .hovercard-arrow {
	border-right-color: rgb(59 130 246);
	border-top-color: rgb(59 130 246);
}

.hovercard-content.hovercard-blue-border[data-positioned-side="right"] .hovercard-arrow {
	border-left-color: rgb(59 130 246);
	border-bottom-color: rgb(59 130 246);
}

.hovercard-content.hovercard-green-border[data-positioned-side="top"] .hovercard-arrow {
	border-right-color: rgb(34 197 94);
	border-bottom-color: rgb(34 197 94);
}

.hovercard-content.hovercard-green-border[data-positioned-side="bottom"] .hovercard-arrow {
	border-left-color: rgb(34 197 94);
	border-top-color: rgb(34 197 94);
}

.hovercard-content.hovercard-green-border[data-positioned-side="left"] .hovercard-arrow {
	border-right-color: rgb(34 197 94);
	border-top-color: rgb(34 197 94);
}

.hovercard-content.hovercard-green-border[data-positioned-side="right"] .hovercard-arrow {
	border-left-color: rgb(34 197 94);
	border-bottom-color: rgb(34 197 94);
}

.hovercard-content.hovercard-purple-border[data-positioned-side="top"] .hovercard-arrow {
	border-right-color: rgb(168 85 247);
	border-bottom-color: rgb(168 85 247);
}

.hovercard-content.hovercard-purple-border[data-positioned-side="bottom"] .hovercard-arrow {
	border-left-color: rgb(168 85 247);
	border-top-color: rgb(168 85 247);
}

.hovercard-content.hovercard-purple-border[data-positioned-side="left"] .hovercard-arrow {
	border-right-color: rgb(168 85 247);
	border-top-color: rgb(168 85 247);
}

.hovercard-content.hovercard-purple-border[data-positioned-side="right"] .hovercard-arrow {
	border-left-color: rgb(168 85 247);
	border-bottom-color: rgb(168 85 247);
}

.hovercard-content.hovercard-amber-border[data-positioned-side="top"] .hovercard-arrow {
	border-right-color: rgb(251 191 36);
	border-bottom-color: rgb(251 191 36);
}

.hovercard-content.hovercard-amber-border[data-positioned-side="bottom"] .hovercard-arrow {
	border-left-color: rgb(251 191 36);
	border-top-color: rgb(251 191 36);
}

.hovercard-content.hovercard-amber-border[data-positioned-side="left"] .hovercard-arrow {
	border-right-color: rgb(251 191 36);
	border-top-color: rgb(251 191 36);
}

.hovercard-content.hovercard-amber-border[data-positioned-side="right"] .hovercard-arrow {
	border-left-color: rgb(251 191 36);
	border-bottom-color: rgb(251 191 36);
}

/* Content inner wrapper for spacing */
.hovercard-content-inner {
	@apply space-y-3;
}

/* Arrow indicator */
.hovercard-arrow {
	@apply absolute w-3 h-3 bg-white rotate-45;
	/* No border by default - added per side below */
}

.hovercard-content:not(:popover-open) .hovercard-arrow {
	@apply invisible;
}

/* Arrow positioning based on side */
.hovercard-content[data-positioned-side="top"] .hovercard-arrow {
	@apply bottom-[-6px] left-1/2 -translate-x-1/2;
	border-right: 1px solid rgb(226 232 240);
	border-bottom: 1px solid rgb(226 232 240);
}

.hovercard-content[data-positioned-side="bottom"] .hovercard-arrow {
	@apply top-[-6px] left-1/2 -translate-x-1/2;
	border-left: 1px solid rgb(226 232 240);
	border-top: 1px solid rgb(226 232 240);
}

.hovercard-content[data-positioned-side="left"] .hovercard-arrow {
	@apply right-[-6px] top-1/2 -translate-y-1/2;
	border-right: 1px solid rgb(226 232 240);
	border-top: 1px solid rgb(226 232 240);
}

.hovercard-content[data-positioned-side="right"] .hovercard-arrow {
	@apply left-[-6px] top-1/2 -translate-y-1/2;
	border-left: 1px solid rgb(226 232 240);
	border-bottom: 1px solid rgb(226 232 240);
}

/* Animation variants based on side */
.hovercard-content[data-side="top"]:not(:popover-open) {
	transform: scale(0.95) translateY(4px);
}

.hovercard-content[data-side="bottom"]:not(:popover-open) {
	transform: scale(0.95) translateY(-4px);
}

.hovercard-content[data-side="left"]:not(:popover-open) {
	transform: scale(0.95) translateX(4px);
}

.hovercard-content[data-side="right"]:not(:popover-open) {
	transform: scale(0.95) translateX(-4px);
}

/* Typography defaults for content */
.hovercard-content-inner h1,
.hovercard-content-inner h2,
.hovercard-content-inner h3,
.hovercard-content-inner h4 {
	@apply font-semibold text-gray-900 mb-1.5 leading-tight;
}

.hovercard-content-inner h3 {
	@apply text-base;
}

.hovercard-content-inner h4 {
	@apply text-sm;
}

.hovercard-content-inner p {
	@apply text-sm text-gray-600 leading-relaxed;
	margin-bottom: 0;
}

.hovercard-content-inner p + p {
	@apply mt-2;
}

.hovercard-content-inner a {
	@apply text-blue-600 hover:text-blue-700 underline;
}

/* Divider support */
.hovercard-content-inner hr {
	@apply border-gray-200 my-3;
	border-top-width: 1px;
}

/* Image support */
.hovercard-content-inner img {
	@apply rounded border border-gray-200;
}

/* Data list styling for key-value pairs */
.hovercard-content-inner strong {
	@apply text-gray-700 font-medium;
}

/* Improve spacing in grid layouts */
.hovercard-content-inner .grid {
	@apply gap-3;
}
