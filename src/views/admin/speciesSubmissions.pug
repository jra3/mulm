//- Submissions section partial (loaded via HTMX)

if syncMessage
  .bg-green-50.border.border-green-200.rounded.p-3.mb-3
    p.text-sm.text-green-800= syncMessage

.flex.items-center.justify-between.mb-3
  .flex.items-center.gap-2
    h4.text-sm.font-semibold.text-gray-900 Approved Submissions
    if stats.total_submissions > 0
      span.text-xs.px-2.py-0.5.bg-gray-200.text-gray-700.rounded-full= stats.total_submissions

  if stats.unsynced_submissions > 0
    button.outline.text-xs(
      type="button"
      hx-post=`/admin/species/${groupId}/sync-submissions`
      hx-target="#submissions-list"
      hx-swap="outerHTML"
      hx-indicator="#sync-spinner"
    )
      span#sync-spinner.htmx-indicator.inline-block.w-3.h-3.mr-1.border-2.border-blue-500.border-t-transparent.rounded-full(style="animation: spin 1s linear infinite")
      | Sync #{stats.unsynced_submissions} Out-of-Sync

#submissions-list
  if stats.total_submissions === 0
    .text-center.py-6
      svg.w-12.h-12.text-gray-300.mx-auto.mb-2(fill="none" stroke="currentColor" viewBox="0 0 24 24")
        path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z")
      p.text-sm.text-gray-500 No approved submissions yet
  else
    .space-y-2.max-h-64.overflow-y-auto
      each sub in submissions
        .flex.items-start.justify-between.p-3.bg-gray-50.rounded.border(class=sub.is_synced ? 'border-gray-200' : 'border-yellow-300 bg-yellow-50')
          .flex-1.min-w-0
            .flex.items-center.gap-2.mb-1
              a.text-sm.font-medium.text-blue-600(href=`/submissions/${sub.submission_id}` class="hover:underline")= sub.species_common_name
              if !sub.is_synced
                .flex.items-center.gap-1
                  svg.w-4.h-4.text-yellow-600(fill="currentColor" viewBox="0 0 20 20")
                    path(fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd")
                  span.text-xs.text-yellow-700 Out of sync
            .flex.flex-col.gap-0.5.text-xs.text-gray-600
              div
                span.text-gray-500 Member:
                = ' '
                if sub.member_id
                  a.text-blue-600(href=`/admin/members?search=${sub.member_name}` class="hover:underline")= sub.member_name
                else
                  span.text-gray-400= sub.member_name || 'Unknown'
              div
                span.text-gray-500 Submission Class:
                = ' '
                span(class=sub.is_synced ? 'text-gray-700' : 'text-yellow-700 font-medium')= sub.submission_class
                if !sub.is_synced
                  = ' '
                  span.text-gray-400 (should be:
                  = ' '
                  span.font-medium= sub.species_group_class
                  | )
              if sub.approved_on
                div
                  span.text-gray-500 Approved:
                  = ' '
                  span= new Date(sub.approved_on).toLocaleDateString()
                  if sub.approved_by_name
                    = ' by '
                    span= sub.approved_by_name

//- Add CSS for spinner animation
style.
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
