include ../mixins/memberPointsHover.pug

mixin memberRow(member)
    - const stringCell = ['p-3', 'text-left', 'border-b', 'border-gray-200'];
    - const numberCell = ['p-3', 'text-right', 'border-b', 'border-gray-200'];
    - const centerCell = ['p-3', 'text-center', 'border-b', 'border-gray-200'];
    tr(class="hover:bg-gray-50")

        td(class=numberCell)= member.id
        td(class=centerCell)
            input(disabled checked=member.is_admin == 1 type="checkbox")

        td(class=stringCell)
            a.link(href=`/member/${member.id}`)= member.display_name
        td(class=stringCell)= member.contact_email
        td(class=numberCell)
            - const fishNext = getNextLevel('fish', member.fish_level, member.fishTotalPoints || 0)
            +memberPointsHover(member, 'fish', fishNext, programMetadata.fish)
        td(class=numberCell)
            - const plantNext = getNextLevel('plant', member.plant_level, member.plantTotalPoints || 0)
            +memberPointsHover(member, 'plant', plantNext, programMetadata.plant)
        td(class=numberCell)
            - const coralNext = getNextLevel('coral', member.coral_level, member.coralTotalPoints || 0)
            +memberPointsHover(member, 'coral', coralNext, programMetadata.coral)
        td(class=centerCell)
            .flex.gap-2.items-center.justify-center
                a.link(
                    hx-target="closest tr"
                    hx-swap="outerHTML"
                    hx-get=`/admin/members/${member.id}/edit`) Edit
                if member.hasPassword === 0 && member.hasGoogleAccount === 0
                    button.primary(
                        hx-post=`/admin/members/${member.id}/send-welcome`
                        hx-target="closest tr"
                        hx-swap="outerHTML"
                        title="Send welcome email with password setup link") Send Welcome
