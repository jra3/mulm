include ../mixins/countBadge.pug

//- Admin Actions Panel Component
//- Collapsible panel for admin dashboard access
//-
//- @param witnessCount - Number of submissions awaiting witness
//- @param approvalsCount - Number of submissions ready for approval
//- @param witnessProgram - Program type for witness queue link
//- @param approvalsProgram - Program type for approval queue link

mixin adminActionsPanel(witnessCount, approvalsCount, witnessProgram, approvalsProgram)
	- const totalCount = witnessCount + approvalsCount

	.admin-popover(
		role="group"
		aria-label="Admin dashboard")

		//- Simple button (aligns with other buttons)
		button.outline(
			type="button"
			hx-on:click="this.closest('.admin-popover').classList.toggle('open')"
			aria-haspopup="true"
			aria-label=`Admin menu, ${totalCount} items pending`)
			| Admin #{' '}
			+countBadge(totalCount)

		//- Popover menu (floats over content)
		.admin-popover-menu(role="menu")
			a.admin-menu-item(
				href=`/admin/witness-queue/${witnessProgram}`
				role="menuitem")
				.flex.items-center.justify-between.w-full
					span Screening Queue
					+countBadge(witnessCount)

			a.admin-menu-item(
				href=`/admin/queue/${approvalsProgram}`
				role="menuitem")
				.flex.items-center.justify-between.w-full
					span Points Award Queue
					+countBadge(approvalsCount)

			a.admin-menu-item(
				href="/admin/members"
				role="menuitem")
				.flex.items-center.justify-between.w-full
					span Manage Members

			a.admin-menu-item(
				href="/admin/species"
				role="menuitem")
				.flex.items-center.justify-between.w-full
					span Manage Species
