include mixins/trophy.pug
include mixins/loadingSpinner.pug

mixin headTag(title, ogData)
	head
		title= title
		link(rel='stylesheet', href='/index.css')
		link(rel='stylesheet', href='/tom-select.css')
		script(src='/htmx-2.0.4.js')
		script(src='/tom-select.complete.min.js')
		script(src=`/typeahead.js?v=${Date.now()}`)
		script(src='/js/hoverCard.js')
		meta(name="viewport" content="width=device-width, initial-scale=1.0")

		// Open Graph tags for social media sharing
		if ogData
			meta(property="og:type" content="article")
			meta(property="og:title" content=ogData.title)
			meta(property="og:description" content=ogData.description)
			meta(property="og:url" content=ogData.url)
			if ogData.image
				meta(property="og:image" content=ogData.image)
				meta(property="og:image:width" content="1200")
				meta(property="og:image:height" content="630")

			// Twitter Card tags
			meta(name="twitter:card" content=ogData.image ? "summary_large_image" : "summary")
			meta(name="twitter:title" content=ogData.title)
			meta(name="twitter:description" content=ogData.description)
			if ogData.image
				meta(name="twitter:image" content=ogData.image)

		block

mixin pageHeader(loggedIn, title, subtitle, trophyData, trophyUniqueId)
	header.bg-white.shadow
		div.max-w-7xl.mx-auto.px-4.py-4.flex.justify-between.items-center
			.flex.text-center.gap-2.items-center
				h2.text-2xl.font-bold.p2= title
				if trophyUniqueId
					+trophyWithHover(trophyData, trophyUniqueId)
				else
					+trophy(trophyData)
				if subtitle
					h3.text-2xl.p2(class="text-gray-500")= subtitle
			.space-x-4.flex.items-center
				a.link(href="/") Home
				a.link(href="/species") Species
				if loggedIn
					a.link(href="/me") Me
				a.link(href=`mailto:${bugReportEmail}` title="Report a bug") üêõ
				if loggedIn
					a.link(href="/account") ‚öôÔ∏è

mixin footer()
	footer.bg-gray-300.py-6.text-center.text-sm.text-gray-500
		.flex.flex-col.text-center
			a.link(href="https://basny.org")
				span(class="text-2xl") Brooklyn Aquarium Society
			span(class="text-base") Educating Aquarists since 1911

mixin dialog()
	div(class="fixed inset-0 z-50 bg-black/0 sm:bg-black/50 sm:flex sm:items-center sm:justify-center sm:p-4" hx-on:click="document.getElementById('dialog').remove()")#dialog
		// The modal box - full screen on mobile, centered card on desktop
		div(class="w-full h-full sm:w-auto sm:h-auto sm:max-w-lg sm:max-h-[90vh] relative shadow-lg bg-gray-200 sm:rounded-lg overflow-y-auto" hx-on:click="event.stopPropagation()")
			// Close button absolutely positioned inside the modal
			a.link.absolute.top-2.right-4.font-bold.z-10(hx-on:click="document.getElementById('dialog').remove()") &times;
			div(class="w-full flex flex-col p-4 sm:p-6")#dialogContent
				block

mixin sidebar()
	.fixed.top-0.right-0.w-80.h-screen.shadow-lg.bg-gray-200.overflow-y-auto#sidebar.p-2
		// Close button absolutely positioned inside the sidebar
		.w-full.relative
			a.link.absolute.top-0.right-0.font-bold(hx-on:click="document.getElementById('sidebar').remove()") &times;
			.w-full.flex.flex-col.items-center.gap-2.p-2#sidebarContent
				block

